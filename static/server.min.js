function refreshlinks(){if($("#link-holder").length<1)return!1;$.ajax({type:"GET",url:$("#link-holder").data("refresh"),success:function(e){$("#link-holder").html(e),feather.replace()}})}function triggerShortModal(e){$("#successModal #modal-input").val(e),$("#successModal .modal-qr p").html('<img src="'+e+'/qr" width="150" class="rounded">'),$("#successModal .copy").attr("data-clipboard-text",e),$("#successModal #downloadPNG").attr("href",e+"/qr/download/png/1000"),$("#successModal ul li").filter(":first-child").find("a").attr("href",e+"/qr/download/pdf/1000"),$("#successModal ul li").filter(":nth-child(2)").find("a").attr("href",e+"/qr/download/svg/1000"),$("#successModal #modal-share a").each(function(){let t=$(this).attr("href");$(this).attr("href",t.replace("--url--",encodeURI(e)))}),new ClipboardJS("#successModal .copy",{container:document.getElementById("successModal")}).on("success",function(){$("#successModal .copy").text(lang.copy)}),new bootstrap.Modal(document.getElementById("successModal")).show()}$(document).ready(function(){"use strict";$("[data-trigger=server-form]").submit(function(e){e.preventDefault();let t=$(this).attr("action"),a=!0;if($(".form-control").removeClass("is-invalid"),$(this).find("[required]").each(function(){let e=$(this).attr("min")?$(this).attr("min"):3;$(this).val().length<e&&(a=!1,$(this).addClass("is-invalid"),$(this).data("error")&&$.notify({message:$(this).data("error")},{type:"danger",placement:{from:"top",align:"right"}}))}),0==a)return!1;$.ajax({type:"POST",url:t,data:$(this).serialize(),dataType:"json",beforeSend:function(){$("body").append('<div class="preloader"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div></div>')},complete:function(){$(".preloader").remove()},success:function(e){$("input[name=_token]").val(e.token),e.error?$.notify({message:e.message},{type:"danger",placement:{from:"top",align:"right"}}):($.notify({message:e.message},{type:"success",placement:{from:"top",align:"right"}}),void 0!==e.html&&$("body").append(e.html),$(this).find("input,textarea").val(""))}})}),$("[data-trigger=shorten-form]").submit(function(e){e.preventDefault();let t=$(this),a=t.attr("action"),s=new FormData(this),r=$("#metaimage");if($(".form-control").removeClass("is-invalid"),$("#return-error .alert").remove(),"1"==$("input[name=multiple]").val())var n=t.find("#urls");else n=t.find("#url");if(0==n.val().length)return $.notify({message:lang.error},{type:"danger",placement:{from:"top",align:"left"}}),$("#url,#urls").addClass("is-invalid"),!1;if($("#metaimage").length>0&&0!=r.get(0).files.length&&r.get(0).files[0].size>1048576&&0==["image/jpeg","image/jpg"].includes(r.get(0).files[0].type))return $.notify({message:lang.imageerror},{type:"danger",placement:{from:"top",align:"left"}}),!1;let o=t.find("button[type=submit]").text();$.ajax({type:"POST",url:a,data:s,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){t.find("button[type=submit]").html('<div class="preloader"><div class="spinner-border spinner-border-sm text-white" role="status"><span class="sr-only">Loading...</span></div></div>')},complete:function(){$(".preloader").remove(),t.find("button[type=submit]").text(o)},success:function(e){if(e.error)return $.notify({message:e.message},{type:"danger",placement:{from:"top",align:"left"}});let a=e.data.shorturl;if($.notify({message:e.message},{type:"success",placement:{from:"top",align:"left"}}),"1"==$("input[name=multiple]").val())return refreshlinks(),n.val(e.data);$("#output-result").length>0&&($("#output-result #qr-result").html('<img src="'+a+'/qr" width="100" class="rounded">'),$("#output-result").removeClass("d-none")),$("#successModal").length>0?(triggerShortModal(a),refreshlinks(),$("#advancedOptions").removeClass("show"),t.find("input,textarea,select").val("")):(n.val(a),t.find("[type=submit]").addClass("d-none"),t.find("[type=button]").attr("data-clipboard-text",a).removeClass("d-none"),$("#advancedOptions").removeClass("show"),new ClipboardJS("[data-trigger=shorten-form] [type=button]").on("success",function(){t.find("[type=submit]").removeClass("d-none"),t.find("[type=button]").addClass("d-none"),t.find("input,textarea,select").val("")}))}})}),$("#search").submit(function(e){e.preventDefault();var t=$(this).find("input[type=text]").val(),a=$(this).attr("action");$.ajax({type:"GET",url:a,data:"q="+t,beforeSend:function(){$("#return-ajax").html('<div class="preloader"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div></div>')},complete:function(){$(".preloader").fadeOut("fast",function(){$(this).remove()})},success:function(e){$("#return-ajax").html(e),$("#link-holder").slideUp("fast"),$("#return-ajax").slideDown("fast"),feather.replace()}})}),$(document).on("click","[data-trigger=archiveselected]",function(e){e.preventDefault();let t=[];$("[data-dynamic]").each(function(){$(this).prop("checked")&&t.push($(this).val())}),$.ajax({type:"GET",url:$(this).attr("href"),data:"selected="+JSON.stringify(t),beforeSend:function(){$("#return-ajax").html('<div class="preloader"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div></div>')},complete:function(){$(".preloader").fadeOut("fast",function(){$(this).remove()})},success:function(e){if(e.error)return $.notify({message:e.message},{type:"danger",placement:{from:"bottom",align:"right"}});$.notify({message:e.message},{type:"success",placement:{from:"bottom",align:"right"}}),refreshlinks(),feather.replace()}})}),$(document).on("change","#payment-form select",function(){var e=$("#total");$.ajax({type:"GET",url:$("#taxrate").data("url"),data:"country="+$(this).val()+"&coupon="+$("#coupon").val(),success:function(t){t.error||($("#taxrate").html(t.html),e.text(t.newprice))}})})});